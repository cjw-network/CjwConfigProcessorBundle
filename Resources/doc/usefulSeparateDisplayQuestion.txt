// From ParameterBranchDisplay before the functionality was rejected upon further inspection
// It is stored here in a text file in order to retain the option of using the functionality later on in a different way


  subTreeViewOpenClickListener() {
    for (const subTreeButton of this.subTreeButtons) {
      subTreeButton.onclick = (event) => {
        event.preventDefault();
        event.stopPropagation();

        this.openSubTreeInSeparateView(
          subTreeButton.parentElement.parentElement
        );
      };
    }
  }

  //---------------------------------------------------------------------------------------------------------------
  // Subtree-Viewport
  //---------------------------------------------------------------------------------------------------------------

  openSubTreeInSeparateView(nodeToFocus) {
    const viewPort = document.createElement("div");
    viewPort.classList.add("subtree_viewport", "ez-sticky-container");

    viewPort.appendChild(this.createSubTreeHeader());
    viewPort.appendChild(this.prepareSubTreeContent(nodeToFocus));

    const viewContainer = document.querySelector(".cjw_main_body");

    const formerView = viewContainer?.querySelector(".subtree_viewport");
    if (formerView) {
      viewContainer.removeChild(formerView);
    }

    const rightSideMenu = document.querySelector(".ez-context-menu");

    if (rightSideMenu) {
      viewContainer?.insertBefore(viewPort, rightSideMenu);
    } else {
      viewContainer?.appendChild(viewPort);
    }
  }

  createSubTreeHeader() {
    const subtreeHeader = document.createElement("div");
    subtreeHeader.classList.add("subtree_header", "ez-sticky-container");

    const subtreeHeadline = document.createElement("span");
    subtreeHeadline.innerText = "Subtree-View:";
    subtreeHeadline.classList.add("subtree_headline");

    const subtreeCloser = document.createElement("button");
    subtreeCloser.innerText = "X";
    subtreeCloser.classList.add("subtree_closer");
    subtreeCloser.onclick = (event) => {
      event.preventDefault();
      event.stopPropagation();

      this.removeSeparateSubtreeViewer();
    };

    subtreeHeader.appendChild(subtreeHeadline);
    subtreeHeader.appendChild(subtreeCloser);

    return subtreeHeader;
  }

  prepareSubTreeContent(nodeToFocus) {
    const duplicatedSubtree = nodeToFocus.cloneNode(true);

    for (const child of duplicatedSubtree.querySelectorAll(".dont_display")) {
      child.classList.remove("dont_display");
    }

    this.cleanUpSubtreeNodes(duplicatedSubtree);

    return duplicatedSubtree;
  }

  cleanUpSubtreeNodes(upperNode) {
    if (upperNode) {
      const keys = upperNode.querySelectorAll(".param_list_keys");

      for (const key of keys) {
        // const toggler = key.querySelector(".param_item_toggle");
        //
        // if (toggler) {
        //   key.removeChild(toggler);
        // }

        const subtreeViewButton = key.querySelector(".open_subtree");

        if (subtreeViewButton) {
          key.removeChild(subtreeViewButton);
        }

        const locationRetrieverButton = key.querySelector(".location_info");

        if (locationRetrieverButton) {
          key.removeChild(locationRetrieverButton);
        }
      }
    }
  }

  removeSeparateSubtreeViewer() {
    const mainBody = document.querySelector(".cjw_main_body");

    if (mainBody) {
      const viewport = document.querySelector(".subtree_viewport");

      if (viewport) {
        mainBody.removeChild(viewport);
      }
    }
  }
